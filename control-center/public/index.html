<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ARI Control Center</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="container header__inner">
        <div class="header__title">
          <div class="logo">ARI</div>
          <div>
            <h1>Control Center</h1>
            <p class="muted">Discovery pipeline (local)</p>
          </div>
        </div>
        <div class="header__meta">
          <span class="pill" id="connection-pill">Connecting…</span>
          <a class="pill pill--link" href="/health" target="_blank" rel="noreferrer">Health</a>
        </div>
      </div>
    </header>

    <main class="container main">
      <section class="panel panel--dashboard" aria-labelledby="dashboard-title">
        <div class="panel__header">
          <h2 id="dashboard-title">Dashboard</h2>
          <div class="panel__headerRight">
            <span class="pill" title="Last refreshed" id="dashboard-updated">—</span>
            <button class="btn btn--ghost" id="refresh-dashboard" type="button">Refresh</button>
          </div>
        </div>

        <div class="panelBody">
          <div class="dashboardGrid">
            <div class="statCard">
              <div class="statCard__label">Suburbs</div>
              <div class="statCard__value" id="dash-suburbs-total">—</div>
              <div class="statCard__meta muted" id="dash-suburbs-processed">—</div>
            </div>

            <div class="statCard">
              <div class="statCard__label">Agencies</div>
              <div class="statCard__value" id="dash-agencies-total">—</div>
              <div class="statCard__meta muted">Total in DB</div>
            </div>

            <div class="statCard">
              <div class="statCard__label">Agents</div>
              <div class="statCard__value" id="dash-agents-total">—</div>
              <div class="statCard__meta muted">Total in DB</div>
            </div>

            <div class="statCard">
              <div class="statCard__label">Enrichment</div>
              <div class="statCard__value" id="dash-enrichment-percent">—</div>
              <div class="statCard__meta muted" id="dash-enrichment-meta">—</div>
              <div class="miniProgress" aria-hidden="true">
                <div class="miniProgress__bar" id="dash-enrichment-bar"></div>
              </div>
            </div>
          </div>

          <div class="overviewGrid">
            <div>
              <h3 class="overviewTitle">Suburb status</h3>
              <div class="pillRow" id="dash-suburb-status"></div>
            </div>
            <div>
              <h3 class="overviewTitle">Agent enrichment status</h3>
              <div class="pillRow" id="dash-enrichment-status"></div>
            </div>
            <div>
              <h3 class="overviewTitle">Enrichment quality</h3>
              <div class="pillRow" id="dash-enrichment-quality"></div>
            </div>
          </div>

          <div class="recentActivity">
            <h3 class="overviewTitle">Recent activity</h3>
            <div class="recentActivity__list" id="dash-recent-activity"></div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Suburbs</h2>
          <div class="panel__headerRight">
            <span class="muted" id="suburb-count">0</span>
            <span class="pill" title="Selected suburbs">
              selected: <span id="selected-count">0</span>
            </span>
            <button class="btn btn--ghost" id="select-all" type="button">Select All</button>
            <button class="btn btn--ghost" id="clear-selection" type="button">Clear</button>
          </div>
        </div>

        <div class="filters">
          <div class="filterRow">
            <div class="segmented" role="group" aria-label="Priority tier filter">
              <button class="segmented__btn is-active" data-tier="all" type="button">All</button>
              <button class="segmented__btn" data-tier="1" type="button">Tier 1</button>
              <button class="segmented__btn" data-tier="2" type="button">Tier 2</button>
              <button class="segmented__btn" data-tier="3" type="button">Tier 3</button>
            </div>
          </div>

          <div class="filterRow">
            <label class="field">
              <span class="field__label">Status</span>
              <select id="status-filter" class="field__control">
                <option value="all">All</option>
                <option value="pending">pending</option>
                <option value="in_progress">in_progress</option>
                <option value="discovered">discovered</option>
                <option value="complete">complete</option>
                <option value="failed">failed</option>
                <option value="abandoned">abandoned</option>
              </select>
            </label>

            <label class="field">
              <span class="field__label">Region</span>
              <select id="region-filter" class="field__control">
                <option value="all">All</option>
              </select>
            </label>

            <label class="field">
              <span class="field__label">Search</span>
              <input id="search-input" class="field__control" placeholder="e.g. Mosman" autocomplete="off" />
            </label>
          </div>
        </div>

        <div class="list" id="suburb-list" role="list"></div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Selected suburb</h2>
        </div>

        <div class="detail" id="detail">
          <div class="empty">
            <p class="muted">Select a suburb from the list to view details.</p>
          </div>
        </div>
      </section>

      <div class="sideColumn">
        <section class="panel" aria-labelledby="enrichment-title">
          <div class="panel__header">
            <h2 id="enrichment-title">Enrichment</h2>
            <div class="panel__headerRight">
              <span class="pill" title="Agents pending enrichment">
                pending: <span id="enrichment-pending-count">0</span>
              </span>
              <span class="pill" title="Agents currently enriching">
                in_progress: <span id="enrichment-in-progress-count">0</span>
              </span>
            </div>
          </div>

          <div class="panelBody">
            <div class="enrichmentControls">
              <label class="field">
                <span class="field__label">Batch size</span>
                <input
                  id="enrichment-batch-size"
                  class="field__control"
                  type="number"
                  min="1"
                  max="50"
                  step="1"
                  value="5"
                />
              </label>
              <button class="btn" id="run-enrichment" type="button">Run Enrichment</button>
            </div>

            <div class="progress" id="enrichment-progress" hidden>
              <div class="progress__bar" aria-hidden="true"></div>
              <div class="progress__meta">
                <span class="muted" id="enrichment-progress-text">Enrichment running…</span>
              </div>
            </div>
          </div>
        </section>

        <section class="panel panel--logs" aria-labelledby="activity-title">
          <div class="panel__header">
            <h2 id="activity-title">Activity</h2>
            <div class="panel__headerRight">
              <div class="segmented segmented--mini" role="group" aria-label="Activity log filter">
                <button class="segmented__btn is-active" data-log-filter="all" type="button">All</button>
                <button class="segmented__btn" data-log-filter="errors" type="button">Errors</button>
                <button class="segmented__btn" data-log-filter="discovery" type="button">Discovery</button>
                <button class="segmented__btn" data-log-filter="enrichment" type="button">Enrichment</button>
              </div>
              <button class="btn btn--ghost" id="clear-logs" type="button">Clear</button>
            </div>
          </div>
          <div class="logs" id="log-list" aria-live="polite"></div>
        </section>
      </div>
    </main>

    <script src="/app.js" defer></script>
  </body>
</html>
